CITY BUILDER: 

order of operations:

Basic reachability / node-edge pathfinding systems 

power, heat, radiation, power grid, engineering, habitation, life support

maintenance, disrepair, dysfunctional modules

Frames of reference, rotators, gravity effects





DISTRIBUTION GRID SYSTEM
- initially model on: heat (as it has very clear consumers and producers)
- assume all nodes and tubes are part of the graph.
- initially, assume only the reactor produces heat, and only the radiators consume heat
- create a heat map visualiser mode for the spaceship.



====================





COMPONENT CONSTRAINTS:
  - must be axial (e.g. engines)
  - requires supercooling connection, life support, etc.


COMPONENT SETTINGS 
  - rotation direction
  - shielding thickness

Functionalities:
radiation focus
Rad shielding

Stuff:



FACILITY VARIANTS:
Habitat (small ring) vs Habitat (large ring) - they are different, but same.

CONSIDER: 
Would be nice if the INNER part of the small  rings had an additional circular facility slot.


SMALL structural ring:

INNER (3 or 6 facility slots)

SURFACE 


But

spokes and side-spines!



SHIP CONSTRUCTION
THE FACILITIES PROBLEM    
    - habitation-related facilities are the only ones that need taking care of.
    - hydroponic and engineering facilities can be "hard-facilities".
    - habitation modules can be large and have internal slots.

    Or, solve these by just assigning bays and modules.
    which then open up INTERNAL SLOTS
    which are displayed via the UI somehow but still tied to a ship part


Structures
 - Parallel spines
 - Radiation shielding
 - Gantry
 - Maneuver thrusters
 - 

[ ] Colliders on elements for clicking
[ ] Hologlitches of holoshader
[x] mass distribution "point cloud"
[ ] Radial facility: habitation module 
[ ] Solve problem : facility slots are slim
   [ ] Maybe there is no problem. Just enumerate all the facilities you think you need.
   [ ] Zero-G habitat ("small ring"), occupying a single section of a module, with a cylinder that has 6 facility slots
   [ ] 

[ ] Autogreebler


CORE: some very, very basic stuff for use by all. Units, conversions, utilities, etc. A scripting API may or may not live in here.
VOID: logic / gameplay layer. NOT just the data layer. This is where you define ships, technologies, buildings, game events, game logic, etc.
SCANNER: View layer UI elements, , Monobehaviours, Effect implementation, glitches, prefabs, game objects, it all goes here.
  Scanner should probably be split into two different assemblies because it doesn't seem right to combine the abstractions for UI elements 
  in the same place where you have highly specialized implementation details such as the part that rotates the ship ring or blinks its lights.

- 
Calaby-Yau-Podolsky Harmonic Electromagnetic Resonance : CYPHER
Calabi-Yau Matrioska Resonance : CYMR

Calabi Yau Resonant Oscillator : CYROS
SCIMMR - self-contained internalized magnetic resonance
RAMA - resonant 
HARM - harmonic resonance magnetism


Relativistic Exit Velocity Degenerate Plasma Fusion Drive

Omicron-Pinch Degenerate Plasma Pulse Aneutronic Fusion Drive using self-contained superconductors
AKA Ouroboros Drive.

Degenerate State Plasma 

RAMA 

Matrioska
Magnetic
Self-contained
Harmonic
Oscillator

- Layers
    - tactical (50 light seconds / 0.1 AU / 1.5 million km) - even at 1%c, it takes more than an hour to cross this distance. Needless to say, 
    - scanner (scan for oort cloud comets, etc.) - around 500 AU radius (increase by a factor of 5000)
    (stellar (up to 25 light years) )
    ( galactic (up to 125 000 light years) )

    * these all reuse the same code with entities.
    * we start with the SCANNER layer


TECHNICAL WORK
- ui audio
- ui transitions
- ui windows / layers (preventing "fall-through" of UI events)
- working hyperlinks 
- ship / external camera is currently ingame.
- picture-in-picture capability



What do we need?

Ship management:

(base ship view)

to BUILD NEW SHIT on the ship. Also, tear down existing shit. Construction tab.
to CONTROL THE MONKEYS on the ship. Social tab.
to RESEARCH NEW SHIT. Research tab.
to DEFEND OUR SHIT. Military tab. 

Mission control:
to VIEW OUR OVERALL MISSION STATE AND PARAMETERS.
to SEND NIGGAS TO MINE MORE SHIT FOR OUR SHIP SO WE CAN BUILD MORE NEW SHIT. Missions tab.


Topdown approach:

Have MAIN MENU.
It has no eyecatch. Just a title and the main menu.

Press a button to show options.

New game / Continue game
Options
Exit


Ingame: press escape to show the quick options dialog ()



Structural modules:
- Reactor
- Heat radiators
- Engine injection assembly
- Maneuver control engines
- Reservoir (storage)
- Meteor shield
- Berth (for mining ships)
- Gantry (for ship production)
- Storm Shelter
- Hangar Bay

- Engineering module
    - materials lab
    - zero-g industry / lathe
    - security station
    - embedded habitat
    - Superheated Centrifuge (requires module adjacent to heat )

- Medical module
    - cryogenic storage
    - hospital
    - nursery
    - genetics lab

- Habitat module
    - parks and greenery
    - cryogenic storage 
    - medical 
    - security station
    - recreation center
    - storage shell (doubles as situational shielding)

- Hydroponic module
    - bio-lab
    - organic recycler
    - algae tanks

- Operations module
    - bridge
    - training grounds
    - Containment / Brig
    - Barracks
    - Arsenal

Minor structures:
- Spinner
- Life support
- Heat exchange turbines
- Railgun mount
- Point defences
- Missile bay
- Large Antenna
- maintenance hub

Not sure what to do with these concepts:
- Observatory 
- Hangar bay ( structural module? or part of Operations module)
- Storm Shelter (could be a facility inside a habitat, or a module)
- Arsenal
- Particle Accelerator
- Hydrolysis separator (this could be implied in life support)
- Storage (is it just a module, like reservoirs? Or Storage Bay)
- 


SIMPLE CONSTRUCTION:

This is similar to X-com's base building.
The ship is divided into pressurized, shielded, separated compartments called MODULES.

Each module gives some basic bonuses (all defense modules employ some sensor technicians, all technical modules give some production)

Some structures may have unclear allegiance to modules; this should not be avoided, but rather be used as a game mechanic. Schools can be in habitation modules, but as a matter of policy, children could be concentrated in special education centers that belong to technical modules.

PRESSURIZATION
- modules are usually pressurized, and most cannot function unpressurized
- modules having their own isolated life support system have much purer air.

ARTIFICIAL GRAVITY
- zero-g habitat modules are possible, but living in zero-g will lead to long-term effects for the population such as lowered productivity and decreased biological integrity
- 1g can only be achieved in a large spinning ring module, or, later a small fast-spinning ring module.
- 1g habitation is coveted. 
- reduced gravity is preferable to no gravity. 
- we could require the player to install a technical module in the base of any spinning module, as the "spinner" structure depends on it. This reduces build diversity.
- Military module in a 1g environment would unlock "high-g training", increasing robustness of the troops.

RADIATION SHIELDING
- in most modules, work areas are shielded from radiation
- rad-shielded modules are much heavier, but offer benefits
- just the existence of rad-shielded modules is sufficient to stratify the society.

DISTANCE AND ADJACENCY
We  run a simple simulation of resource flow. We recognize resource producers, consumers, and 
Resources in this context are power, water, air.

Air needs to be cycled throughout the ship in a closed life-support loop. Purity is tracked in various modules.

Modules can be distributed for redundancy, or joined together for an adjacency bonus.

Radiators lose efficiency the farther away they are from heat sources.
Storage modules should obviously be close to factories processing large amounts of materials.
Reservoirs should be close to reactors.
Habitats should be close to life support.
The route people take from habitats to "work" modules is also tracked. If this becomes too long, it will impact productivity.

ADJUNCT HABITATION:
you can sacrifice a structure slot to have people live in the module where they work. This is not much coveted, as these people can have very little reason to leave their module. This is how you get slums. This is how you get the Independent Republic of Hydroponics C.

ATTACHMENTS:
Observation mast
Railgun 
Reservoirs (propulsion module attachment)
Maneuver thrusters gain a bonus when placed on a propulsion module on a large ring.



- extremes should be viable. "Module soup" where you have one of each is boring and should be discouraged



OR 
distribute as seen fit (2 per segment, one spinal, one ringular)

reactor
propulsion
military
habitat
industry
agriculture
science

central ones are bulkier - while ringular are thinner but can spin.

choose up to one attachment per segment

radiators
engines
reservoirs
storage bays
meteor shield
habitat ring (allows )


modules have immediate benefits, but can also grant structure slots.
Some structures require, and occupy, slots from different modules.
Some structures require power, manpower or cadre.


Example structures:
active magnetic radiation shielding
storm shelter 
high energy laboratory 
plasma centrifuge separator
microlathe 
strike craft hangar
simulator pods
zero-g industry 
water purifier 

criostasis pods
biological storage
nursery

railguns
point defenses
observation mast

We want around 10 segments to start with. This gives us 20 modules + 10 attachments.
Extremes should be viable - like having only 1 science and 5 military modules.
RING modules may be spun (though it's not necessary)

====================================

SEGMENT 1
(Main Propulsion)
PROPULSION RING (6 slots)
- storage reservoir 
- engineering bay 
- distribution grid
- injectors
* Daedalus engines x 2

SEGMENT 2 
(Power)
RING (6 slots)
- reactor core x 3 
- heat exchangers x 2
- separation centrifuge 
* Radiator x 2
* 

SEGMENT 3
(Storage)
- Reservoirs x 6

SEGMENT 4,5 
(Modules)
10 slots 
- materials laboratory
- engineering bay
- production plant
- manufactory 



THE SHIP SHOULD HAVE:

Interstellar engines x 1
Storage reservoirs x 3
Main reactor core
Heat exchange turbines 

Radiators
(Engineering bay)

Cryogenic storage 
Hydroponic farm
Medical center

Biotech laboratory

Education center

Brig 


Bridge
Training center
Simulator pods
Troop Barracks

Radiation shielding


WHAT MAKES SENSE TO HAVE ON THE SHIP?
Some buildings you will only ever need one of, and it's a no-brainer to build them.
So what? That's how it's in Civilization. It does not detract from the design.
It's not just HOW MANY you place.
It's also WHERE you place them. 

Their ship location will influence some events.


It's a problem of varying layers of abstraction.

PROPULSION
ENGINEERING
OPERATIONS
HABITATION 
HYDROPONICS 

Whither : storage, reactor, science, radiators, hospitals, laboratories, manufacturies, simulator pods, education centers, barracks?

So we need to distill this into building blocks:

PROPULSION AND ENERGY
  - engines 
  - reactor core 
  - (optional) parts that influence engine or reactor output, such as injectors
  - radiators

RESOURCE MANAGEMENT
  - storage
  - material recycler 
  - hydrolisis plant 
  - separation centrifuge

HABITATION
  most of these REQUIRE LIFE SUPPORT, REQUIRE PRESSURIZATION, REQUIRE GRAVITY
  - life support - handles pressurization
  - habitation complex (slums)
  - medical center - heals injuries 
  - nursery - can be folded into medical center, but you want your kids to grow up radiation free, right?
  - education center
  - recreation center


FOOD PRODUCTION (entirety of food production can be folded into)
  - hydroponic bay / aquaponic bay
  - yeast tanks
  - algae farms 
  - insect bays 

RESEARCH 
  - genetic laboratory
  - materials laboratory
  - physics laboratory

INDUSTRY
  - industrial plant
  - gantry for large ship production 
  - microlathe (advanced industry)

OPERATIONS 
  - maintenance bay 
  - rotator
  - bridge 
  - docking port (atop a long nonrotating shaft)
  - sensor array (antennae)
  - 

MILITARY
  - barracks 
  - weapon bay (railgun, missile silo, point defence)
  - arsenal (storage of volatile munitions)
  - training center 
  - simulator pods 
  - hangar bay


=======================================

=======================================
GREAT SIMPLIFICATION

Game is named Void.

Ship is represented by a paper doll.

There is a SPINAL paper doll and a RING paper doll. (Rings are an additional paper doll that coexists with the spinal one, but only one is ever at full opacity when you inspect the ship).

Adjacency-wise, a ring is considered adjacent to its related spinal segment.

Two rings can be considered adjacent if they spin in the same direction and you have some technology or another.

Ship is divided into longitudinal SEGMENTS

Each SEGMENT can house up to 3 MODULES initially.

MODULES can have ATTACHMENTS, FACILITIES, SPECIALIZATIONS

Modules have a SURFACE slot too!

Some modules gobble up surface slots (see: large radiators)

Surface slot stuff: radiators, centrifuge, armour, ring spokes

Undecided surface slots:
 ? point defence (seems redundant)
 ? surface hangar (req. hangar, greatly increases small craft & deploy speeds) - seems redundant.
 ? berth (a place for large ships to dock)  - seems redundant, or can be a facility


SAMPLE SHIP: 

I Propulsion  

3xDAEDALUS FUSION ENGINE

II Energy 

Reactor core
Reservoirs 
Large radiator assembly (+heat exchanger turbines)

III Utility 
Crio-pumps 
Storage bay 
[ FREE SLOT] 

IV Habitation
Utility: life support

Hab (10 000 ppl) (w: nursery, storm shelter)
Hab (w: laboratory, medical center)
Hydroponics
surface: rad shielding (or:  surface reservoirs)

V Engineering
engineering bay (zero-g) (w:  materials lab)
storage 
industrial plant 

surface: centrifuge

VI Operations

bridge (w. advanced sensor array)
reactor core (auxilliary mode - own cooling)
hangars 

VII: forward shield


In this paradigm:

- forward impact shield decides what your maximum V can be. 

- putting surface reservoirs onto habitats is a two-for-one deal, but they are more vulnerable to impacts. 

- life support is a baked-in, per-module activatable.

- you can upgrade the number of modules per section to 4

- maximum lenght of the ship in sections is subject to your materials research.

- before full rings you can unlock the ability to construct minor rings, a 2-slot module adjacent to the main module. These cannot coexist with full 6-slot large rings

- a counterweight module is needed if you don't have counterrotating rings, wasting precious space.

- "Restricted module" or "Black-ops" module is where you put all your secret stuff. 



Resources: 

MAJOR resources
Water - can be reprocessed 
Resources - used for construction 
Organics - carbohydrates, mostly.
Heavy elements
(Raw ore) - unused on its own. Reprocessed, it yields some Water, Resources, Organics, and Heavy Elements, depending on composition / source of the raw ore. 

Specific resources: 
He-3 fuel
(and other fuels)


PHOSPHOR is tracked as a "well-being" element. It's one of the doomsday clocks in the game, that prevents you from population booming.

People and hydroponics bays take up a part of the "phosphor budget". There is no hard cap but shortages will have mild-to-increasingly-severe health consequences. 


you can QUARANTINE modules to prevent outbreaks. 

(we should also consider carefully a "wiring" paper doll for flow of heat, power, and crio)

Alien artefacts (or one-off "eva angel cores" that can each be used for a one-off module / construction / tech ) take the form of Slay the Spire relics (run mutators, variety injectors, rule breakers).

Some annexes:
- integrated living 

Restricted modules allow you to work on secret projects. 
- alien containment
- dimensional laboratory
- private army 


Later modules:

- Artificial ocean (water storage, recreation area)


ANNEXES: 
Hydroponics module 
  - insect farm 
  - algae tanks 
  - synthetic flesh farm
  - service arachnid annex

Habitation module
  - Nursery 
  - Medical center
  - Storm shelter
  - Recreation area
  - "Slums" (not called that, but still)
  - Utopia

Command module: 
 - training center 
 - simulator pods 
 - computer cores

Engineering module 
  - zero-g lathe
  - ore processor
  - recycler
  - gantry
  - maintenance bay

Hangar module: 
  - surface hangars 
  - ship berth 
  - 


Various technology unlocks, in no set order:
  - Needle Fusion (engines that work on proton chain, without He3)
  - Brains in Jars (pilots will be the first to complain that their physical bodies are preventing them from executing maneuvers; the rest of the ship might follow)
  - Service Arachnids 


Morale / Comfort




BLACKOUT 
  - you must be careful with how you distribute things, because in the middle of the battle they can encounter BLACKOUT if a critical power system is knocked out; 
  DEPRESSURIZATION event if life support is knocked out or a hab is pierced
  - early game, micrometeorite events are not as terrible. But as you increase your velocity, they will become more and more serious. This meshes nicely with our game design, as it allows us to ease the player into redundancy mode.
  - 








PREMADE SHIP

Ship has a tree of so-called modules. These can represent anything from large structural parts, small facilities, specializations or annexes.
You can build new modules if you have sufficient resources.

PROPULSION SECTION
Propulsion can be tweaked, annexed and upgraded
Reactor core can be tweaked, annexed and upgraded
Ouroboros ring can be tweaked, annexed and upgraded

HABITAT RING SECTION:
12 slots for habitation

12 slots for "auxilliary" modules
- hydroponics
- laboratories
- engineering bays
- storm shelters

can be upgraded with another habitat ring section. Potentially more!



ENGINEERING SECTION:

3 slots for industrial modules
 - zero-g industry
 - ore extraction, processing, recycling

can be expanded as needed with more slots.

OPERATIONS SECTION:

slots for:
- hangars
- security troops 


COMMAND  SECTION
- bridge / control center